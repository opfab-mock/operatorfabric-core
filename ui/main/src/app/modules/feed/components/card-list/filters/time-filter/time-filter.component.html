<!-- Copyright (c) 2018-2020, RTE (http://www.rte-france.com)              -->
<!-- See AUTHORS.txt                                                       -->
<!-- This Source Code Form is subject to the terms of the Mozilla Public   -->
<!-- License, v. 2.0. If a copy of the MPL was not distributed with this   -->
<!-- file, You can obtain one at http://mozilla.org/MPL/2.0/.              -->
<!-- SPDX-License-Identifier: MPL-2.0                                      -->
<!-- This file is part of the OperatorFabric project.                      -->


<ng-template #filterTimeContent>

  <div class="form-group" id="start">
    <label for="time-start" translate>feed.filters.time.start.label</label>
    <div class="row">
      <div class="col-md-6">
        <input type="text" mwlFlatpickr [allowInput]="false" [convertModelValue]="true" [(ngModel)]="startDate"
          [time24hr]="true" dateFormat="Y-m-d" class="form-control" id="startDateInput" >
      </div>
      <div class="col-md-5"> <input class="form-control" type="text" [(ngModel)]="startTime" maxlength="5" id="startTimeInput">  </div>
    </div>
  </div>


  <div class="form-group" id="end">
    <label for="time-end" translate>feed.filters.time.end.label</label>
    <div class="row">
      <div class="col-md-6">
        <input type="text" mwlFlatpickr [allowInput]="false" [convertModelValue]="true" [(ngModel)]="endDate"
          [time24hr]="true" dateFormat="Y-m-d" class="form-control" id="endDateInput">
      </div>
      <div class="col-md-5"> <input class="form-control" type="text" [(ngModel)]="endTime"  maxlength="5" id="endTimeInput"> </div>
    </div>
  </div>

  <div style="text-align:center">
    <button *ngIf="filterByPublishDate" type="button" class="btn btn-primary w-30" translate (click)="resetDate()">
      button.reset
    </button>
    &nbsp;
    <button *ngIf="!filterByPublishDate" type="button" class="btn btn-primary w-30" translate (click)="p.close();setOldFilterValue()">
      button.cancel
    </button>
    &nbsp;
    <button type="button" id="confirm_button" class="btn btn-primary w-30" translate
      (click)="p.close();setNewFilterValue()">
      button.ok
    </button>
  </div>

</ng-template>
<ng-template #filterTimeTitle>
    <div *ngIf="filterByPublishDate">
      <span translate>feed.filters.time.titleIfFilterBasedOnPublishDate</span>
    </div>
    <div *ngIf="!filterByPublishDate">
      <span translate>feed.filters.time.titleIfFilterBasedOnBusinessDate</span>
    </div>
</ng-template>
<button type="button" class="btn btn-outline-light p-1 mr-1 border-0 opfab-feed-icon" placement="auto right" [ngbPopover]="filterTimeContent"
  [popoverTitle]="filterTimeTitle" [autoClose]="false" triggers="manual" #p="ngbPopover" (click)="p.open()">
  <fa-icon   icon="clock"></fa-icon>
</button>